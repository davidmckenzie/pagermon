<!DOCTYPE html>
<html ng-app=app lang="en">
<% include global/header.ejs %>
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="//maps.google.com/maps/api/js?sensor=true"></script>
<script src="scripts/gmaps.js" type="text/javascript"></script>
 <script type="text/javascript">
    var map;
    $(document).ready(function(){
      map = new GMaps({
        div: '#map',
        lat: 55.3781,
        lng: 3.4360
      });

     <% for(var i=0; i<messages.length; i++) { %>
        <% coords = messages[i].coords.split(','); %>
        <% if (isNaN(coords[0]) || isNaN(coords[1]) || coords[1].trim() == '' || coords[0].trim() == '') { continue; } %>
        <% date = new Date(messages[i].timestamp).toDateString() %>
        map.addMarker({
          lat: <%= coords[0] %>,
          lng: <%= coords[1] %>,
          'title': <%= messages[i].id %>,
          infoWindow: {
            content:'<b>Date:<%= date %></b><i><%= messages[i].message %></i>'
          }
        });
      <% } %>
    });
  </script>
<base href="/">
</head>

<body id="home-body">

<% include global/menu.ejs %>

<div id="content" class="container-fluid">
  
  <div style="position: 0; display:block;">
    <div id="map" style="position:0;"></div>
  </div>


  <!-- Template -->

    </div>
</div>

<% include global/footer.ejs %>
